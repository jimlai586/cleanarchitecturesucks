<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Swift 4ce</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Swift 4ce</h1>
</header>
<section data-field="subtitle" class="p-summary">
I managed to bully my way to using Swift 4 over Objective-C in a new project.
</section>
<section data-field="body" class="e-content">
<section name="6e05" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><figure name="45d1" id="45d1" class="graf graf--figure graf--leading"><img class="graf-image" data-image-id="1*C9rn9i5edqQkTaYcbT1_-A.jpeg" data-width="600" data-height="300" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*C9rn9i5edqQkTaYcbT1_-A.jpeg"><figcaption class="imageCaption">I only know one truth…</figcaption></figure><blockquote name="1746" id="1746" class="graf graf--blockquote graf-after--figure">It is time for Objective-C</blockquote><blockquote name="946e" id="946e" class="graf graf--blockquote graf-after--blockquote">… to end!</blockquote><h3 name="02f7" id="02f7" class="graf graf--h3 graf-after--blockquote">Swift 4ce</h3><p name="8748" id="8748" class="graf graf--p graf--hasDropCapModel graf--hasDropCap graf-after--h3"><span class="graf-dropCap">I</span> managed to bully my way to using Swift 4 over Objective-C in a new project.</p><p name="0905" id="0905" class="graf graf--p graf-after--p">It is a no small feat to cut a way through all Objc developers that have been using it since the dawn of time. In a team that viewed auto-layout as heresy and sticked to manual frame-calculation, the introduction of Swifty development along with “modern” tools like auto-layout is a complete turn-over.</p><p name="097b" id="097b" class="graf graf--p graf-after--p">Since Swift was first introduced, most of the reviews I saw were optimistic about its application while remarking that Objective-C would still be dominant in a couple of years and you should learn it nevertheless.</p><p name="4912" id="4912" class="graf graf--p graf-after--p">This kind of 50–50 argument, in my opinion, seriously underestimated the rapid development of Swift. After using Swift 4 in production for a couple months, I feel the need to make this appreciation post and say it out loud:</p><blockquote name="bc37" id="bc37" class="graf graf--blockquote graf-after--p">It is an absolute blast writing Swift for iOS development.</blockquote><blockquote name="b00b" id="b00b" class="graf graf--blockquote graf-after--blockquote">Learn and use Swift as much as possible, don’t care what other people say.</blockquote><blockquote name="ba6f" id="ba6f" class="graf graf--blockquote graf-after--blockquote">If you don’t feel Swifty, you are not doing it right.</blockquote><h3 name="31ee" id="31ee" class="graf graf--h3 graf-after--blockquote">I did not know I want this until it came out</h3><p name="d50b" id="d50b" class="graf graf--p graf-after--h3">Apple has had a reputation of knowing what customer wants, even before they know they need it. And like many others, I thought it was a myth, a marketing scheme, a coporate propagada … until I used it myself.</p><p name="0ff9" id="0ff9" class="graf graf--p graf-after--p">Before Swift, I was struggling as a developer. I couldn’t write flawless C codes like what so many others seem to do in their sleep. Writing java is no fun for me either. Python is a better fit, but the job I landed using python was not.</p><p name="8541" id="8541" class="graf graf--p graf-after--p">Then came Swift. OMG. I did not know but I wanted this all along.</p><p name="84a1" id="84a1" class="graf graf--p graf-after--p">It is as if you were chopping wood with butter knive, then you got a <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">lightsaber</em></strong>.</p><h3 name="7bf8" id="7bf8" class="graf graf--h3 graf-after--p">Is it possible to learn this power?</h3><p name="a1f2" id="a1f2" class="graf graf--p graf-after--h3">Not from a jedi.</p><p name="d3b5" id="d3b5" class="graf graf--p graf-after--p">I mean, not if you use it the wrong way.</p><p name="ae59" id="ae59" class="graf graf--p graf-after--p">For example, optionals, in my opinion, is the cornerstone of Swift. It forces you to handle possible nils in a non-intrusive way. Your code/thought flow is not frequently interrupted by nil checks. They are there to support , not impede, and S means safe in Swift.</p><p name="5b0c" id="5b0c" class="graf graf--p graf-after--p">But as I saw in code review, some of the junior developers just ! over any optionals when they assumed it won’t be nils. Then came the crying of nostalgia of Objective-C that things were much simpler.</p><p name="700a" id="700a" class="graf graf--p graf-after--p">Since those with nostalgia are the same people that say calculating frame manually for each UI component is much simpler than auto-layout, I decided to just ignore them and shove Swift down their throat.</p><p name="d310" id="d310" class="graf graf--p graf-after--p">This is not to say you can’t write safe code in Objective-C, you certainly can. But it won’t be as pretty as that in Swift, and requires more skill from developers in general. On the other hand, beginners can benefit greatly from optional unwrapping in Swift. There is this nice little thing called compiler error that shuts you down whenever you made a mistake of not handling possible nil. People who survived often claim that it helped them become a better developer.</p><p name="b283" id="b283" class="graf graf--p graf-after--p">Of the other great features in Swift, two stand out in our project development. They are like Darth Vader and Luke Skywalker, each is very powerful on its own; and together …</p><figure name="f000" id="f000" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*EHdNGMXLJjmvVvOeKDmWSw.jpeg" data-width="500" data-height="344" src="https://cdn-images-1.medium.com/max/800/1*EHdNGMXLJjmvVvOeKDmWSw.jpeg"></figure><p name="fae1" id="fae1" class="graf graf--p graf-after--figure">To know the roles they played in our architecture, I need to cover what architecture is used first.</p><h3 name="7178" id="7178" class="graf graf--h3 graf-after--p">Elm to Redux to iOS Swift</h3><blockquote name="44f0" id="44f0" class="graf graf--blockquote graf-after--h3">If only you knew the power of the Dark Side</blockquote><p name="e6fa" id="e6fa" class="graf graf--p graf-after--blockquote">Obviously, Obi-wan never told you specifically how Redux can fit in iOS development.</p><p name="1662" id="1662" class="graf graf--p graf-after--p">It is amazing how React single-handedly defines <em class="markup--em markup--p-em">the </em>way to do web front-end. It even makes Javascript <em class="markup--em markup--p-em">almost</em> tolerable. It is also amazing how Redux provides an unified structure for handling state changes and its effects on UI.</p><p name="389c" id="389c" class="graf graf--p graf-after--p">Redux’s origin can then be traced to Elm, a <em class="markup--em markup--p-em">functional</em> language and is renowned for <em class="markup--em markup--p-em">Elm architecture.</em></p><p name="11ff" id="11ff" class="graf graf--p graf-after--p">Before putting Swift in production, I’ve had a pleasure of taking a pilgrimage towards Elm-React-Redux architecture. It was my trip to Kamar-Taj where I <em class="markup--em markup--p-em">guard</em> the world from mystica threats; it was my trip to <a href="http://starwars.wikia.com/wiki/Dagobah" data-href="http://starwars.wikia.com/wiki/Dagobah" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Dagobah</a> where I learn the ways of the force. It changes my understanding of front-end forever that I cannot do iOS the same way again.</p><p name="4235" id="4235" class="graf graf--p graf-after--p">Needless to say, when I introduced Redux-like structure into iOS development, nobody knows what I’m doing. Yet it works surprisingly well given that it is a much simplified form of Redux. No explicit reducer to handle state transition, and use enum to represent state. For view controllers with internal states, identify those states and enumerate them in … <em class="markup--em markup--p-em">enum</em>, make UI a function of state, and BAM! A cleaner architecture than all of those in our previous projects</p><p name="20ee" id="20ee" class="graf graf--p graf-after--p">Now take a look at how this is done in Swift.</p><h3 name="bf70" id="bf70" class="graf graf--h3 graf-after--p">Enum</h3><blockquote name="d8ec" id="d8ec" class="graf graf--blockquote graf-after--h3">Obi-Wan is here, and the enum is with him.</blockquote><p name="f80f" id="f80f" class="graf graf--p graf-after--blockquote">People would often overlook the usage of this when making a transition. But it is so powerful I don’t recall what it is like to writing code without this.</p><p name="f0b8" id="f0b8" class="graf graf--p graf-after--p">Besides the usual features, it truly shines when used in state management.</p><p name="9a12" id="9a12" class="graf graf--p graf-after--p">The state management here is in the sense of Redux state. It is useful because such enum state can carry associate values, such as a JSON. Design view controllers in a way that the state and its associated values completely determine the UI, that is,<em class="markup--em markup--p-em"> UI as function of state.</em></p><p name="f27c" id="f27c" class="graf graf--p graf-after--p">A Redux-equivalent of dispatch + reducer can be as simple as assigning to a state var, e.g.; vc.state = .idle(JSON())</p><p name="a596" id="a596" class="graf graf--p graf-after--p">I tried a few ways to incoporate a Redux-like store into project, but as it turns out one global store is not suitable in iOS development, whereas a specific store structure for every view controller is quite tedious. A <em class="markup--em markup--p-em">balance</em> of overheads and its usefulness is to simplify the store-dispatch-reducer structure.</p><p name="c4e0" id="c4e0" class="graf graf--p graf-after--p">To quote Thanos from Avengers trailer:</p><blockquote name="92ca" id="92ca" class="graf graf--blockquote graf-after--p">Fun isn’t something one considers when balancing the universe, but <strong class="markup--strong markup--blockquote-strong">this</strong> <strong class="markup--strong markup--blockquote-strong">does put a smile on my face</strong></blockquote><p name="7804" id="7804" class="graf graf--p graf-after--blockquote">For example, a detail view controller in a master-detail design could consist of two states; .idle and .show(JSON)</p><p name="b3e4" id="b3e4" class="graf graf--p graf-after--p">When in idle state, clears and hides view, and when in show state, update view with model data from associated JSON.</p><p name="405a" id="405a" class="graf graf--p graf-after--p">For master view controller, it switches between two states and supply JSON if needed by directly assigning a new state value to the state property of detail view controller. No store, no dispatch, no reducer. Yet it does the most important thing, i.e.; it requires you to do whatever you expect detail view controller to do as <em class="markup--em markup--p-em">function of state</em>. In which, you are <em class="markup--em markup--p-em">forced</em> to enumerate internal states and put it explicitly in one place, thus freeing up the rest of the view controller to be <em class="markup--em markup--p-em">pure</em> functions.</p><p name="9fad" id="9fad" class="graf graf--p graf-after--p">Did I mention Swift drew a lot from functional programming paradigms?</p><p name="f674" id="f674" class="graf graf--p graf-after--p">It cuts through pure functions like Vader cutting thorugh rebels at the ned Rogue One.</p><figure name="2533" id="2533" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*rGjUZVYuJg-mODC1DSFetA.jpeg" data-width="2700" data-height="1800" src="https://cdn-images-1.medium.com/max/800/1*rGjUZVYuJg-mODC1DSFetA.jpeg"><figcaption class="imageCaption">Vader, before he cuts through rebel scums in Rogue One.</figcaption></figure><p name="eca4" id="eca4" class="graf graf--p graf-after--figure">Besides its usage in doing Redux, I also use it as keys for JSON parameter for networking requests. In the republic times .. uh, I mean Objective-C days, we have to use String as dictionary keys which is error-prone and without auto-completion. By using raw String enum as key, I never have to worry about typo. Say it again, S means Safe in Swift.</p><h3 name="6a07" id="6a07" class="graf graf--h3 graf-after--p">didSet</h3><blockquote name="110f" id="110f" class="graf graf--blockquote graf-after--h3">I am altering the deal, pray I don’t alter it any further.</blockquote><p name="1918" id="1918" class="graf graf--p graf-after--blockquote">Doing UI as function of state is a two man job. You need state itself, and some mechanism to trigger UI change as state changes.</p><p name="82b4" id="82b4" class="graf graf--p graf-after--p">This is where didSet or in general <em class="markup--em markup--p-em">property observer</em> comes in.</p><p name="3a93" id="3a93" class="graf graf--p graf-after--p">Put a didSet to the state property and as soon as it is assigned a new value, it alters the deal .. um, I mean it updates view-model.</p><figure name="e823" id="e823" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*GCVbkJ-TO-bcqmpYSa7_4A.jpeg" data-width="500" data-height="281" src="https://cdn-images-1.medium.com/max/800/1*GCVbkJ-TO-bcqmpYSa7_4A.jpeg"><figcaption class="imageCaption">I am the master now!</figcaption></figure><p name="a5f4" id="a5f4" class="graf graf--p graf-after--figure">In fact I would say that this feature puts R in Swift.</p><blockquote name="efc4" id="efc4" class="graf graf--blockquote graf-after--p">But there is no R in Swift</blockquote><p name="01ba" id="01ba" class="graf graf--p graf-after--blockquote">Oh, I mean it becomes RxSwift, or at least a poor man’s version.</p><p name="4194" id="4194" class="graf graf--p graf-after--p">R is the missing piece to complete a FRP paradigm, as in functional reactive programming. R is React/Redux. R is ARGH!!!!!! TOO GOOD!!!</p><p name="1b29" id="1b29" class="graf graf--p graf-after--p">No seriously, even without its implication in a reactive programming paradigm, it works so well with enum in the setting aforementioned to a point that I forgot what it is supposed to be used for.</p><h3 name="7282" id="7282" class="graf graf--h3 graf-after--p">I don’t believe it</h3><figure name="0247" id="0247" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*dkToaDLfvqjuQxDAJ25Njw.gif" data-width="401" data-height="200" src="https://cdn-images-1.medium.com/max/800/1*dkToaDLfvqjuQxDAJ25Njw.gif"></figure><p name="83ef" id="83ef" class="graf graf--p graf-after--figure">To sum up this appreciation/meme thread as Star Wars developer.</p><ol class="postList"><li name="c43d" id="c43d" class="graf graf--li graf-after--p">The force awakens is a shameless reboot of New Hope. #JarJarAbrams</li></ol><p name="75da" id="75da" class="graf graf--p graf-after--li">2. Not much people appreciate the reduction of noise in Swift codes as compared to Objective-C. It is HUGE that you don’t have to write headers, macros, semi-colons, brackets, parenthesis, @, and the god-awful block syntax.</p><p name="be2f" id="be2f" class="graf graf--p graf-after--p graf--trailing">3. It is time for Objective-C to end, unless there is a plot twist in Last Jedi.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@swift2931" class="p-author h-card">Jim Lai</a> on <a href="https://medium.com/p/3976f3835c1e"><time class="dt-published" datetime="2017-12-05T06:39:44.403Z">December 5, 2017</time></a>.</p><p><a href="https://medium.com/@swift2931/swift-4ce-3976f3835c1e" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on December 9, 2023.</p></footer></article></body></html>